<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>bonohu blog</title>
		<meta name="description" content="">
		<meta name="author" content="bonohu">

		<link rel="stylesheet" href="/theme/css/foundation.css" />
		<link rel="stylesheet" href="/theme/css/pygment/monokai.css" />
		<link rel="stylesheet" href="/theme/css/custom.css" />


		<script src="/theme/js/modernizr.js"></script>

		<!-- Feeds -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113297-11"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-113297-11');
</script>

		<!-- mathjax config similar to math.stackexchange -->
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			jax: ["input/TeX", "output/HTML-CSS"],
			tex2jax: {
				inlineMath: [ ['$', '$'] ],
				displayMath: [ ['$$', '$$']],
				processEscapes: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
			},
			messageStyle: "none",
			"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	</head>
	<body>
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<!-- mobile top bar to activate nav -->
				<nav class="tab-bar show-for-small">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" ><span></span></a>
					</section>

					<section class="middle tab-bar-section">
						<h1 class="title">bonohu&nbsp;blog</h1>
					</section>
				</nav>

				<!-- mobile side bar nav -->
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
						<li><a href="">Home</a></li>
						<li><label>Categories</label></li>
							<li class="active"><a href="/category/dbcls.html">DBCLS</a></li>
							<li ><a href="/category/misc.html">misc</a></li>
							<li ><a href="/category/rnaseq.html">rnaseq</a></li>
							<li ><a href="/category/shell.html">shell</a></li>

						<li><label>Links</label></li>
							<li><a href="http://bonohu.jp/">Dr.Bono's website</a></li>
							<li><a href="https://europepmc.org/authors/0000-0003-4413-0651">Europe PMC</a></li>
							<li><a href="https://github.com/bonohu">GitHub</a></li>
							<li><a href="http://orcid.org/0000-0003-4413-0651">ORCID</a></li>
							<li><a href="https://www.ncbi.nlm.nih.gov/pubmed?cmd=search&term=Bono%20H[au]%20AND%201995%3A2100[dp]%20NOT%20jpn[la]">PubMed</a></li>
							<li><a href="https://researchmap.jp/bonohu/?lang=english">ResearchMap</a></li>



						<li><label>Social</label></li>
							<li><a href="https://figshare.com/authors/Hidemasa_Bono/476712">Figshare</a></li>
							<li><a href="https://scholar.google.co.jp/citations?user=e6OaeXQAAAAJ&hl=en">GoogleScholar</a></li>
							<li><a href="https://profiles.impactstory.org/u/0000-0003-4413-0651">ImpactStory</a></li>
							<li><a href="https://www.researchgate.net/profile/Hidemasa_Bono">ResearchGate</a></li>
							<li><a href="https://twitter.com/drbonohu">Twitter</a></li>
					</ul>	
				</aside>

				<!-- top bar nav -->
				<nav class="top-bar hide-for-small-only" data-topbar>
					<ul class="title-area">
						<li class="name">
							<h1><a href="/">bonohu blog</a></h1>
						</li>
					</ul>

					<section class="top-bar-section">
						<ul class="left">
								<li class="active"><a href="/category/dbcls.html">DBCLS</a></li>
								<li ><a href="/category/misc.html">misc</a></li>
								<li ><a href="/category/rnaseq.html">rnaseq</a></li>
								<li ><a href="/category/shell.html">shell</a></li>
						</ul>
                        <ul class="right">                                                                                                                                           
                                                                                                                                             
                        </ul>  
					</section>
				</nav>

				<!-- Main Page Content and Sidebar -->
				<section class="main-section">
					<div class="row">
						<!-- Main Content -->
						<div class="medium-9 small-12 columns" role="content">
<article>
	<h2>So this is Xmas And what have you done?</h2>
	<p>I joined <a href="http://2018.biohackathon.org/hackathon">BioHackathon2018</a> held at Matsue.
I also joined <a href="https://github.com/pitagora-galaxy/cwl/wiki/CWL-Workshop-Tokyo-2018">Common Workflow Language (CWL) Workshop Tokyo 2018</a> held at Shibuya prior to the hackathon, and learned a little bit about CWL.</p>
<p>I have other tasks (update searchability of All of gene expression (AOE)) to be discussed in the hackathon, but it was a very good chance to implement my data analysis pipeline with CWL for making an index for AOE.
I asked <a href="https://github.com/manabuishii">Ishii-san</a> about the possibility of CWLization for non-docker workflow, and he said 'It definitely works!'.
So I tried to code it concurrently.</p>
<p>I wrote my code with a great <a href="https://github.com/pitagora-galaxy/cwl/wiki/CWL-Start-Guide-JP">reference material (in Japanese)</a> which was shown in CWL Workshop Tokyo 2018.</p>
<p>For the reference, my original script to run was like <a href="https://github.com/dbcls/AOE/blob/master/00getlistofxRX.sh">this</a>.</p>
<div class="highlight"><pre><span></span>perl 00getlistofxRX.pl \
| pigz -c &gt; xRX.json.gz
</pre></div>


<p>First I tried to make <code>CommandLineTool</code> by modifying the sample code for my case.
Because my code requires an additional file which tells the IP address of API server, I failed to do it initially.
With a great help from Ishii-san, I could do it finally (<a href="https://github.com/dbcls/AOE/blob/master/perl-gethoge.cwl"><code>perl-gethoge.cwl</code></a>).
The files to be used should be described in <code>inputs:</code>.</p>
<p>Then, other part (<code>CommandLineTool</code>) for the workflow was coded with the name <a href="https://github.com/dbcls/AOE/blob/master/pigz.cwl"><code>pigz.cwl</code></a> which compresses the output from the other command.</p>
<p>Finally the <code>Workflow</code> named <a href="https://github.com/dbcls/AOE/blob/master/gethoge-and-pigz.cwl"><code>gethoge-and-pigz.cwl</code></a> was coded by looking at the great reference described above.
There was some trials in setting the output files, but it was not so hard compared with the former issue (additional file inclusion).</p>
<p>These <code>cwl</code> files were successfully pushed to <a href="https://github.com/dbcls/AOE">GitHub pages</a> and thus <a href="https://view.commonwl.org/workflows/github.com/dbcls/AOE/blob/3ab6db7ca9eb982111e0aa038e03a74183fd06bb/gethoge-and-pigz.cwl">visualized with the power of public web service</a>, where you can see our workflow in a diagram representation. 
And, my workflow can be run with the command below now!</p>
<div class="highlight"><pre><span></span>cwltool perl-gethoge.cwl --file 00getlistofxRX.pl  --ipfile IP.txt
</pre></div>


<p>Of course, <code>IP.txt</code> must be specified (not in GitHub repository now, though).</p>
<p>Thanks a lot, Ishii-san and other hackers in CWL community especially for <a href="https://github.com/mr-c">Michael</a> who gave me a lot of chocolates both at Tokyo and Matsue!</p>
	<hr/>
	<h6>Written by <a href="/author/bonohu.html">bonohu</a> in <a href="/category/dbcls.html">DBCLS</a> on 金 21 12月 2018.</h6>
</article>

<hr/>
						</div>
						<!-- End Main Content -->
						<!-- Sidebar -->
						<aside class="medium-3 hide-for-small-only columns">
							<div class="panel">
								<h5>Links</h5>
								<ul class="side-nav">
									<li><a href="http://bonohu.jp/">Dr.Bono's website</a></li>
									<li><a href="https://europepmc.org/authors/0000-0003-4413-0651">Europe PMC</a></li>
									<li><a href="https://github.com/bonohu">GitHub</a></li>
									<li><a href="http://orcid.org/0000-0003-4413-0651">ORCID</a></li>
									<li><a href="https://www.ncbi.nlm.nih.gov/pubmed?cmd=search&term=Bono%20H[au]%20AND%201995%3A2100[dp]%20NOT%20jpn[la]">PubMed</a></li>
									<li><a href="https://researchmap.jp/bonohu/?lang=english">ResearchMap</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Tags</h5>
								<ul class="tag-cloud">
								</ul>
							</div>


							<div class="panel">
								<h5>Social</h5>
								<ul class="side-nav">
									<li><a href="https://figshare.com/authors/Hidemasa_Bono/476712">Figshare</a></li>
									<li><a href="https://scholar.google.co.jp/citations?user=e6OaeXQAAAAJ&hl=en">GoogleScholar</a></li>
									<li><a href="https://profiles.impactstory.org/u/0000-0003-4413-0651">ImpactStory</a></li>
									<li><a href="https://www.researchgate.net/profile/Hidemasa_Bono">ResearchGate</a></li>
									<li><a href="https://twitter.com/drbonohu">Twitter</a></li>
								</ul>
							</div>
						</aside>
						<!-- End Sidebar -->
					</div>

					<!-- Footer -->
					<footer class="row">
						<div class="medium-9 small-12">
							<hr/>
							<p class="text-center">Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://foundation.zurb.com/">Zurb Foundation</a>. Theme by <a href="http://hamaluik.com">Kenton Hamaluik</a>.</p>
						</div>
					</footer>
					<!-- End Footer -->
				</section>
				<a class="exit-off-canvas"></a>
			</div><!--off-canvas inner-->
		</div><!--off-canvas wrap-->

		<script src="/theme/js/jquery.js"></script>
		<script src="/theme/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>
	</body>
</html>